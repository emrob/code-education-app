function getChromeVersion(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):!1}function setEditorJSLoaded(){editorJSLoaded=!0}function loadDataIntoEditor(e,t){var n=document.querySelector("#editor");typeof n.whenDOMLoaded=="undefined"?setTimeout(function(){loadDataIntoEditor(e)},100):n.whenDOMLoaded.then(function(){t?(n.showBigFileDialog(),n.bigSVG=e):n.artworkSVG=e})}function loadDomJsonLib(){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.async=!1,t.onload=setEditorJSLoaded,browserSupportsEditor()&&(t.src="/components/eezy-editor/libs/domJSON.min.js",e.appendChild(t),waitForEditorJS())}function loadEditorJS(){loadDomJsonLib();var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.async=!1,t.onload=setEditorJSLoaded,browserSupportsEditor()&&(t.src="/components/eezy-editor/eezy-editor.js",e.appendChild(t),waitForEditorJS())}function waitForEditorJS(){if(editorJSLoaded)return;setTimeout(waitForEditorJS,100)}function alertOnOldChrome(){navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&getChromeVersion()<=53&&alert("Your version of chrome is outdated. Please update chrome to use the editor.")}function browserSupportsEditor(){return navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&getChromeVersion()>53||navigator.userAgent.toLowerCase().indexOf("opera")>-1?!0:!1}function redirectUnsupportedBrowser(){browserSupportsEditor()||(window.location="/editor")}function setZendeskStylesWhenVisible(){var e=window.setInterval(function(){$("iframe#launcher.zEWidget-launcher--active").is(":visible")&&($("iframe#launcher.zEWidget-launcher--active").css("margin","20px"),window.clearInterval(e))},500)}var random_svgs=["https://static.vecteezy.com/system/resources/svgs/000/131/052/original/2a75cb49-f76c-431f-914f-cc0e5748e5f4.svg?1484155946","https://static.vecteezy.com/system/resources/svgs/000/114/102/original/cca0fca0-8f9d-4d7b-bf85-aae7dee55571.svg?1484930265","https://static.vecteezy.com/system/resources/svgs/000/097/362/original/06d90c10-4f89-43d0-8929-37472b0e9e67.svg?1484157815","https://static.vecteezy.com/system/resources/svgs/000/116/857/original/ca51da6a-f33b-413b-9338-ed6b1609b271.svg?1484167134","https://static.vecteezy.com/system/resources/svgs/000/133/824/original/80f953e9-877a-4a0c-b36a-31f3139d7875.svg?1484930401","https://static.vecteezy.com/system/resources/svgs/000/082/270/original/82270.svg?1473886752","https://static.vecteezy.com/system/resources/svgs/000/116/854/original/c74e301f-5d0a-4c92-b894-ff767da070a7.svg?1484167213","https://static.vecteezy.com/system/resources/svgs/000/117/588/original/1f551eb9-8235-4575-b71a-b6cd291fe8cc.svg?1484167903","https://static.vecteezy.com/system/resources/svgs/000/117/526/original/2d1e72f8-25c2-44dc-8ffd-54393c0cab7c.svg?1484930872"],editorJSLoaded=!1;$(".edit-and-download-resource-link").on("click",function(e){if(!browserSupportsEditor()){alertOnOldChrome(),redirectUnsupportedBrowser();return}loadEditorJS(),window.zEmbed||function(e,t){var n,r,i,s,o,u=[],a=document.createElement("iframe");window.zEmbed=function(){u.push(arguments)},window.zE=window.zE||window.zEmbed,a.src="javascript:false",a.title="",a.role="presentation",(a.frameElement||a).style.cssText="display: none",i=document.getElementsByTagName("script"),i=i[i.length-1],i.parentNode.insertBefore(a,i),s=a.contentWindow,o=s.document;try{r=o}catch(e){n=document.domain,a.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',r=o}r.open()._l=function(){var e=this.createElement("script");n&&(this.domain=n),e.id="js-iframe-async",e.src="https://assets.zendesk.com/embeddable_framework/main.js",this.t=+(new Date),this.zendeskHost="eezy.zendesk.com",this.zEQueue=u,this.body.appendChild(e)},r.write('<body onload="document._l();">'),r.close()}(),setZendeskStylesWhenVisible(),$(".eezy-editor-popup").show(),$("body").css({overflow:"hidden"}),$(".adunit").remove(),$("#eezy-editor-popup #editor").attr("enabled",!0);if(typeof svg_url!="undefined")if(show_big_file_dialog){var t=document.querySelector("#editor");$.get(svg_url,function(e){loadDataIntoEditor(e,!0)},"text")}else $.get(svg_url,function(e){loadDataIntoEditor(e)},"text");$.post("/clicks/editor-open",{resource_id:resource_id}),e.preventDefault()}),$(".svg-link").on("click",function(e){if(!browserSupportsEditor()){alertOnOldChrome(),redirectUnsupportedBrowser();return}loadEditorJS(),window.zEmbed||function(e,t){var n,r,i,s,o,u=[],a=document.createElement("iframe");window.zEmbed=function(){u.push(arguments)},window.zE=window.zE||window.zEmbed,a.src="javascript:false",a.title="",a.role="presentation",(a.frameElement||a).style.cssText="display: none",i=document.getElementsByTagName("script"),i=i[i.length-1],i.parentNode.insertBefore(a,i),s=a.contentWindow,o=s.document;try{r=o}catch(e){n=document.domain,a.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',r=o}r.open()._l=function(){var e=this.createElement("script");n&&(this.domain=n),e.id="js-iframe-async",e.src="https://assets.zendesk.com/embeddable_framework/main.js",this.t=+(new Date),this.zendeskHost="eezy.zendesk.com",this.zEQueue=u,this.body.appendChild(e)},r.write('<body onload="document._l();">'),r.close()}(),setZendeskStylesWhenVisible(),$(".eezy-editor-popup").show(),$("body").css({overflow:"hidden"}),$(".adunit").remove();var t=document.querySelector("#editor");$("#eezy-editor-popup #editor").attr("artworkID",$(this).data("artworkid"));if($(t).data("random")===!0)var n=random_svgs[Math.floor(Math.random()*random_svgs.length)];else var n=$(this).data("svg-url");if($(this).data("svg-size")>5e5)var r=!0;else var r=!1;$("#eezy-editor-popup #editor").attr("enabled",!0);if(typeof n!="undefined")if(r){var t=document.querySelector("#editor");$.get(n,function(e){loadDataIntoEditor(e,!0)},"text")}else $.get(n,function(e){loadDataIntoEditor(e)},"text");e.preventDefault()}),window.addEventListener("load",function(){var e=document.querySelector("#editor");e.addEventListener("commandexec",function(t){var n=t.detail;$.post("/clicks/editor-metrics",{command:n,referrer:document.referrer});if(n==="exit")track("editor","exit",window.location.pathname),window.onbeforeunload=null,location.reload();else if(n==="triggerLogin")$.cookies.set("editorSaveBeforeLogin","true"),$(".login-link").first().click();else if(n==="saveForLater"){var r=e.artworkSVG;track("editor","save for later",window.location.pathname)}else n==="help"&&window.open("https://eezy.zendesk.com/hc/en-us/categories/115000042227-Editor-App","_blank")})});